function readTestData(){var e={};e.title=document.getElementById("test-title").value,e.subject=document.getElementById("test-subject").value,e.duration=+document.getElementById("test-duration").value,e.complexity=+document.getElementById("test-complexity").value,e.description=document.getElementById("test-description").value,e.questions=[],e.answers=[];for(var t=document.getElementsByClassName("question-content"),n=0;n<t.length;n++){for(var s=t[n],a=s.querySelector(".question-title-wrapper input").value,r=getQuestionTypeForJSON(s.querySelector(".question-head-wrapper select").value),o=s.getElementsByClassName("option-wrapper"),l=[],u=0,c=0;c<o.length;c++){var i=o[c].querySelector("input[type='text']").value,d=o[c].firstElementChild.checked;l.push(i),u+=d?Math.pow(2,c):0}e.questions.push({title:a,type:r,options:l}),e.answers.push(u)}return e}function collectTestData(){var e={};e.testID=+document.getElementById("submit-test").getAttribute("data-test-id"),e.answers=[];for(var t=document.getElementsByClassName("question-content"),n=0;n<t.length;n++){for(var s=t[n],a=s.getElementsByClassName("option-wrapper"),r=0,o=0;o<a.length;o++){var l=a[o].firstElementChild.checked;r+=l*Math.pow(2,o)}e.answers.push(r)}return e}function sendTestData(e,t){if(t)var n=readTestData();else n=collectTestData();var s=new XMLHttpRequest;s.open("POST",e,!0),s.setRequestHeader("Content-type","application/json"),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&(t?document.write(s.responseText):afterTest(JSON.parse(s.responseText)))},s.send(JSON.stringify(n))}function afterTest(e){function t(){for(var e=document.getElementsByClassName("disabled-after-test"),t=0;t<e.length;t++)e[t].disabled=!0}function n(e){for(var t=document.getElementById("test-content").children,n=0;n<t.length;n++)e[n]?t[n].querySelector(".question-content").className+=" correct":t[n].querySelector(".question-content").className+=" incorrect"}var s=e.result;t(),n(s)}